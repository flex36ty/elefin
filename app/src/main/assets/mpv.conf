# ==========================================================
# ELEFIN MPV - NVIDIA Shield Optimized
# Text Subtitles (SRT/VTT) Configuration
# ==========================================================

# ----- VIDEO OUTPUT -----
vo=gpu
gpu-api=opengl
gpu-context=android
opengl-es=yes
gpu-sw=yes

# CRITICAL: Force subtitles to render IN the GPU layer
# Without this, subtitles may render on a separate plane
blend-subtitles=video

# ----- HARDWARE DECODING -----
hwdec=mediacodec-copy
hwdec-codecs=all
hwdec-preload=yes

# ----- HDR & COLOR -----
tone-mapping=hable
hdr-compute-peak=no
hdr-peak-fallback=1000
vf=format=bt709:colormatrix=bt709:primaries=bt709:TRC=bt709

# ----- FRAME-SYNC / SMOOTH MOTION -----
tscale=oversample
video-sync=audio
interpolation=yes
interpolation-threshold=0.03

# ----- PERFORMANCE -----
profile=gpu-hq
scale=ewa_lanczos
cscale=ewa_lanczos
dscale=mitchell
sws-lgb=0.0
sws-cgb=0.0

# ----- OSD -----
osc=no
osd-level=1
osd-font-size=26

# ==========================================================
# TEXT SUBTITLES (SRT, VTT, ASS, TTML)
# Default for streaming services & TV shows
# ==========================================================

# Always show subtitles when selected
sub-visibility=yes

# Text subtitle styling (optimized for Android TV 4K screens)
sub-font="Roboto"
sub-font-size=55
sub-scale=2.4
sub-color=FFFFFF
sub-border-color=000000
sub-border-size=3
sub-shadow-color=000000
sub-shadow-offset=2
sub-margin-y=40
sub-pos=90
sub-blur=0

# ASS subtitle features
sub-ass=yes
embeddedfonts=yes
sub-ass-vsfilter-aspect-compat=no
sub-auto=yes
sub-use-margins=yes
sub-scale-by-window=yes

# ==========================================================
# PGS/SUP BITMAP SUBTITLES
# Applied programmatically when pgssub codec is detected
# ==========================================================
# NOTE: PGS-specific settings are applied in SubtitleManager.kt
# when MPV reports it's using the pgssub decoder
